<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="api.macro('kotti:templates/view/master.pt')">

  <article metal:fill-slot="content"
           class="content"
           i18n:domain="kotti_eshop"
           tal:define="shop context">

    <h1 class="shop-title">${context.title}</h1>

    <p class="shop-description lead">
      ${context.description}
    </p>

    <!-- shop carousel -->
    <div class="shop-carousel-row row">
      <div class="shop-carousel-col col col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div id="shop-carousel" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#shop-carousel" data-slide-to="0" class="active"></li>
            <li data-target="#shop-carousel" data-slide-to="1"></li>
            <li data-target="#shop-carousel" data-slide-to="2"></li>
            <li data-target="#shop-carousel" data-slide-to="3"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
            <div class="item active">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-1.jpg')}" 
                   alt="img1">
              <div class="carousel-caption">
                Lorem ipsum dolor sit amet.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-2.jpg')}"
                   alt="img2">
              <div class="carousel-caption">
                Quo natus dolorum enim, eveniet fuga praesentium tenetur ea.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-3.jpg')}"
                   alt="img3">
              <div class="carousel-caption">
                Animi illum, magnam ipsam.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-4.jpg')}"
                   alt="img4">
              <div class="carousel-caption">
                Quidem veritatis harum.
              </div>
            </div>                        
          </div>

          <!-- Controls -->
          <a class="left carousel-control" href="#shop-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#shop-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div><!-- shop carousel -->

    <div class="shop-content-row row">
      <div class="shop-categories-col col col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <h3>Categories</h3>
        <ul class="list-left list-categories">
          <li tal:repeat="category shop.get_all_productcategories()">
            <a href="${api.url(shop)}@@search-products?category=${category.title}">
              ${category.title}
            </a>
            <span class="products-number">(${len(category.shopproducts)})</span>
          </li>
        </ul>
        <h3>Materials</h3>
        <ul class="list-left list-materials">
          <li tal:repeat="material shop.get_all_productmaterials()">
            <a href="${api.url(shop)}@@search-products?material=${material.title}">
              ${material.title}
            </a>
            <span class="products-number">(${len(material.shopproducts)})</span>
          </li>
        </ul>
        <h3>Topics</h3>
        <ul class="list-left list-topics">
          <li tal:repeat="topic shop.get_all_producttopics()">
            <a href="${api.url(shop)}@@search-products?topic=${topic.title}">
              ${topic.title}
            </a>
            <span class="products-number">(${len(topic.shopproducts)})</span>
          </li>
        </ul>
        <h3>Ages</h3>
        <ul class="list-left list-ages">
          <li tal:repeat="age shop.get_all_productages()">
            <a href="${api.url(shop)}@@search-products?age=${age.title}">
              ${age.title}
            </a>
            <span class="products-number">(${len(age.shopproducts)})</span>
          </li>
        </ul>
      </div>
      <div class="shop-products-col col col-lg-9 col-md-9 col-sm-12 col-xs-12">
        <h2>${custom_page_title}</h2>

        <div class="row products-list">
          <tal:repeat repeat="product products">
            <div class="product-item-col col col-lg-4 col-md-6 col-sm-12 col-xs-12">
              <h3 class="product-title"><a href="${api.url(product)}">${product.title}</a></h3>

              <div class="product-gallery">
                <div class="product-image-div"
                     tal:repeat="productimage product.get_all_images().all()[:1]"><!-- only first img -->
                  <img tal:condition="productimage.data" class="product-image-thumb"
                   src="${request.resource_url(productimage)}image/span2" />
                </div>
              </div>

              <div class="product-details">
                <h4>${product.price} RON</h4>
                <p tal:condition="python: product.price_offer and product.expires_offer_date >= today">
                  PRICE OFFER: ${product.price_offer}
                </p>
                <p class="featured-product" tal:condition="product.featured is True">**FEATURED**</p>
                <h5 class="product-status">${product.status}</h5>
              </div>

              <a class="shop-add-btn btn btn-primary" href="#add-to-cart-link">
                Add to cart
              </a>
            </div>
          </tal:repeat>
        </div>
      </div>      
    </div>
  </article>
</html>