<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="api.macro('kotti:templates/view/master.pt')">

  <article metal:fill-slot="content"
           class="content"
           i18n:domain="kotti_eshop"
           tal:define="shop context">

    <h1 class="shop-title">${context.title}</h1>

    <p class="shop-description lead">
      ${context.description}
    </p>

    <!-- shop carousel -->
    <div class="shop-carousel-row row">
      <div class="shop-carousel-col col col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div id="shop-carousel" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <ol class="carousel-indicators">
            <li data-target="#shop-carousel" data-slide-to="0" class="active"></li>
            <li data-target="#shop-carousel" data-slide-to="1"></li>
            <li data-target="#shop-carousel" data-slide-to="2"></li>
            <li data-target="#shop-carousel" data-slide-to="3"></li>
          </ol>

          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
            <div class="item active">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-1.jpg')}" 
                   alt="img1">
              <div class="carousel-caption">
                Lorem ipsum dolor sit amet.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-2.jpg')}"
                   alt="img2">
              <div class="carousel-caption">
                Quo natus dolorum enim, eveniet fuga praesentium tenetur ea.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-3.jpg')}"
                   alt="img3">
              <div class="carousel-caption">
                Animi illum, magnam ipsam.
              </div>
            </div>
            <div class="item">
              <img src="${request.static_url('kotti_eshop:static/images/carousel-demo-img-4.jpg')}"
                   alt="img4">
              <div class="carousel-caption">
                Quidem veritatis harum.
              </div>
            </div>                        
          </div>

          <!-- Controls -->
          <a class="left carousel-control" href="#shop-carousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#shop-carousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div><!-- shop carousel -->

    <div class="shop-content-row row">
      <div class="shop-categories-col col col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <h3>Categories</h3>
        <ul class="list-left list-categories">
          <li tal:repeat="category shop.get_all_productcategories()">
            <a href="${api.url(api.root)}@@search-products?category=${category.title}">
              ${category.title}
            </a>
          </li>
        </ul>
        <h3>Materials</h3>
        <ul class="list-left list-materials">
          <li tal:repeat="material shop.get_all_productmaterials()">
            <a href="${api.url(api.root)}@@search-products?material=${material.title}">
              ${material.title}
            </a>
          </li>
        </ul>
        <h3>Topics</h3>
        <ul class="list-left list-topics">
          <li tal:repeat="topic shop.get_all_producttopics()">
            <a href="${api.url(api.root)}@@search-products?topic=${topic.title}">
              ${topic.title}
            </a>
          </li>
        </ul>
        <h3>Ages</h3>
        <ul class="list-left list-ages">
          <li tal:repeat="age shop.get_all_productages()">
            <a href="${api.url(api.root)}@@search-products?age=${age.title}">
              ${age.title}
            </a>
          </li>
        </ul>
      </div>
      <div class="shop-products-col col col-lg-9 col-md-9 col-sm-12 col-xs-12">
        <h2>Products</h2>

        <div class="products-list">
          <div tal:repeat="product shop.get_all_products()">
            <h3><a href="${api.url(product)}">${product.title}</a></h3>

            <div class="product-gallery">
              <div class="product-image-div"
                   tal:repeat="productimage product.get_all_images().all()">
                <img width="300px" tal:condition="productimage.data" class="product-image"
                 src="${request.resource_url(productimage)}image" />
              </div>
            </div>

            <div class="product-details">
              <p>PRICE: ${product.price}</p>
              <p tal:condition="python: product.price_offer and product.expires_offer_date >= today">
                PRICE OFFER: ${product.price_offer}
              </p>
              <p>SUPPORT DAYS: ${product.support_days}</p>
              <p>FEATURED: ${product.featured}</p>
              <p>STATUS: ${product.status}</p>
            </div>

            <div tal:condition="product.productcategories">
              <h4>Categories</h4>
              <ul>
                <li>
                  <a href="${api.url(api.root)}@@search-products?category=${product.productcategories[0]}">
                    ${product.productcategories[0]}
                  </a>
                  <span tal:repeat="category product.productcategories[1:]">
                    , <a href="${api.url(api.root)}@@search-products?category=${category}">${category}</a>
                  </span>
                </li>
              </ul>
            </div>

            <div tal:condition="product.productmaterials">
              <h4>Materials</h4>
              <ul>
                <li>
                  <a href="${api.url(api.root)}@@search-products?material=${product.productmaterials[0]}">
                    ${product.productmaterials[0]}
                  </a>
                  <span tal:repeat="material product.productmaterials[1:]">
                    , <a href="${api.url(api.root)}@@search-products?material=${material}">${material}</a>
                  </span>
                </li>
              </ul>
            </div>

            <div tal:condition="product.producttopics">
              <h4>Topics</h4>
              <ul>
                <li>
                  <a href="${api.url(api.root)}@@search-products?topic=${product.producttopics[0]}">
                    ${product.producttopics[0]}
                  </a>
                  <span tal:repeat="topic product.producttopics[1:]">
                    , <a href="${api.url(api.root)}@@search-products?topic=${topic}">${topic}</a>
                  </span>
                </li>
              </ul>
            </div>

            <div tal:condition="product.productages">
              <h4>Ages</h4>
              <ul>
                <li>
                  <a href="${api.url(api.root)}@@search-products?age=${product.productages[0]}">
                    ${product.productages[0]}
                  </a>
                  <span tal:repeat="age product.productages[1:]">
                    , <a href="${api.url(api.root)}@@search-products?age=${age}">${age}</a>
                  </span>
                </li>
              </ul>
            </div>

            <div tal:condition="product.tags">
              <h4>Tags</h4>
              <ul>
                <li>
                  <a href="${api.url(api.root)}@@search-products?tag=${product.tags[0]}">
                    ${product.tags[0]}
                  </a>
                  <span tal:repeat="tag product.tags[1:]">
                    , <a href="${api.url(api.root)}@@search-products?tag=${tag}">${tag}</a>
                  </span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>      
    </div>
  </article>
</html>