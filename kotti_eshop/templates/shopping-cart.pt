<div class="shopping-cart-row row" tal:condition="product">

  <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
    <h3 class="product-details">
      <span class="product-title">${product.title}</span>
      <small class="product-description">${product.description}</small>
      <span class="product-price">${python: float(product.price)} ${api.shop_currency()}</span>
    </h3>
  </div>

  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
    <tal:condition condition="request.user">
      <p class="pull-right">
        <form method="POST" action="${request.resource_url(api.root, '@@cart_operations')}">
          <button class="add-to-cart shop-add-btn btn btn-primary" name="add_to_cart">
            Add to cart
          </button>
          <a class="view-cart shop-view-btn btn btn-default" href="">
            View cart
          </a>
          <input type="hidden" name="backend_product_id" value="${product.id}">
          <input type="hidden" name="quantity" value="3"><!-- [TODO] option change quantity -->
        </form>
      </p>
    </tal:condition>

    <tal:condition condition="not request.user">
      <p class="pull-right">
        <a href="${api.url(api.root, '@@login')}">Log in</a> to buy ${product.title}.
      </p>
    </tal:condition>

  </div>
</div>

<div class="products-row row" tal:condition="shopping_cart">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
    <h3>Products in cart:</h3>
    <table class="table table-condensed">
      <thead>
        <tr>
          <th>PIN</th>
          <th>Title</th>
          <th>Quantity</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody>
        <tal:repeat repeat="content_record shopping_cart.cart_content">
          <tr tal:define="product content_record.product">
            <td>${product.pin}</td>
            <td>${product.title}</td>
            <td>${content_record.quantity}</td>
            <td>${product.price}</td>
          </tr>
        </tal:repeat>
      </tbody>
    </table>
  </div>
</div>