<div class="shopping-cart-row row" tal:condition="product">

  <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
    <h3 class="product-details">
      <span class="product-title">${product.title}</span>
      <small class="product-description">${product.description}</small>
      <span class="product-price">${python: float(product.price)} ${api.shop_currency()}</span>
    </h3>
  </div>

  <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
    <tal:condition condition="request.user">
      <p class="pull-right">
        <form method="POST" action="${request.resource_url(api.root, '@@cart_operations')}">
          <button class="add-to-cart shop-add-btn btn btn-primary" name="add_to_cart">
            <span i18n:translate="">Add to cart</span>
          </button>
          <button tal:condition="shopping_cart and shopping_cart.get_content_record(product.id)"
                  class="remove-from-cart shop-remove-btn btn btn-danger" name="remove_from_cart">
            <span i18n:translate="">Remove from cart</span>
          </button>
          <a class="view-cart shop-view-btn btn btn-default" href="">
            <span i18n:translate="">View cart</span>
          </a>
          <input type="hidden" name="backend_product_id" value="${product.id}">
          <input type="number" name="quantity" value="1" min="1">
        </form>
      </p>
    </tal:condition>

    <tal:condition condition="not request.user">
      <p class="pull-right">
        <a href="${api.url(api.root, '@@login')}">Log in</a> to buy ${product.title}.
      </p>
    </tal:condition>

  </div>
</div>

<div class="products-row row" tal:condition="shopping_cart">
  <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
    <h3>Products in cart:</h3>
    <table class="table table-condensed">
      <thead>
        <tr>
          <th i18n:translate="">Title / Unique Product Identification Number</th>
          <th i18n:translate="">Quantity</th>
          <th i18n:translate="">Unit price</th>
          <th i18n:translate="">Total price</th>
        </tr>
      </thead>
      <tbody>
        <tal:repeat repeat="content_record shopping_cart.cart_content">
          <tr tal:define="product content_record.product">
            <td>${product.title} / ${product.pin}</td>
            <td>${content_record.quantity}</td>
            <td>${python: float(product.price)}</td>
            <td>${python: float(product.price) * content_record.quantity} ${api.shop_currency()}</td>
          </tr>
        </tal:repeat>
      </tbody>
    </table>
    <h5>
      <b i18n:translate="">Cart Total:
        <span i18n:name="">${shopping_cart.get_total_price()} ${api.shop_currency()}</span>
      </b>
    </h5>
    <a class="checkout-btn btn btn-primary" href="${api.url(api.root, '@@checkout')}">
      <span i18n:translate="">Checkout</span>
    </a>
  </div>
</div>